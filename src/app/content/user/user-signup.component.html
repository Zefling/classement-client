<h1>{{ 'user.signup.title' | transloco }}</h1>

<form class="form" [formGroup]="profileForm">
  <div>
    <mg-input class="s-12">
      <mg-input-label>{{ 'user.login.username' | transloco }}</mg-input-label>
      <mg-input-text formControlName="username" />
      <mg-input-desc class="level-strong">
        @if (profileForm.value.username) {
          <span class="strong" [class.error-block]="usernameExist"></span>
        }
      </mg-input-desc>
    </mg-input>

    <mg-input class="s-12">
      <mg-input-label>{{ 'user.login.password' | transloco }}</mg-input-label>
      <mg-input-password formControlName="password" eye />
      <mg-input-desc class="level-strong">
        @if (!strong) {
          @for (lvl of passedTests; track lvl) {
            <span [style.--level]="lvl"></span>
          }
        } @else {
          <span class="strong"></span>
        }
      </mg-input-desc>
    </mg-input>

    <mg-input class="s-12">
      <mg-input-label>{{ 'user.login.password.bis' | transloco }}</mg-input-label>
      <mg-input-password formControlName="password2" eye />
      <mg-input-desc class="level-strong">
        @if (confirm) {
          <span class="strong"></span>
        }
      </mg-input-desc>
    </mg-input>

    <mg-input class="s-12">
      <mg-input-label>{{ 'user.login.email' | transloco }}</mg-input-label>
      <mg-input-text formControlName="email" />
      <mg-input-desc class="level-strong">
        @if (profileForm.value.email) {
          <span class="strong" [class.error-block]="emailExist || emailInvalide"></span>
        }
      </mg-input-desc>
    </mg-input>
  </div>

  @if (showError.length) {
    <mg-message type="error">
      <ul>
        @for (error of showError; track error) {
          <li>{{ error }}</li>
        }
      </ul>
    </mg-message>
  }

  <div class="button">
    <button (click)="submit()">{{ 'user.signup.action' | transloco }}</button>
  </div>
</form>

<div class="buttons">
  <p>
    {{ 'user.login.oauth.create' | transloco }}
  </p>
  <button (click)="oauth('discord')">
    <img src="./assets/icons/Discord_logo.svg" /> <span>{{ 'user.login.oauth.discord' | transloco }}</span>
  </button>
  <button (click)="oauth('facebook')">
    <img src="./assets/icons/Facebook_logo.svg" /> <span>{{ 'user.login.oauth.facebook' | transloco }}</span>
  </button>
  <!--<button (click)="oauth('google')">{{ 'user.login.oauth.google' | transloco }}</button>-->
  <p>
    {{ 'user.login.oauth.create.after' | transloco }}
  </p>
</div>

<div class="links">
  <div>
    <a routerLink="/user/password-lost">{{ 'user.login.password.lost' | transloco }}</a>
  </div>
  <div>
    <a routerLink="/user/login">{{ 'user.login.login' | transloco }}</a>
  </div>
</div>
