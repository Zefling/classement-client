<div>Convert image to WebP 300×300.</div>

<button class="primary" (click)="optimise()">Optimise</button>

<div>Current size : {{ totalSize | numFormat }} octects for {{ total }} images.</div>

<div *ngIf="progress">
    <div><progress [max]="total" [value]="progress"></progress> {{ progress }} / {{ total }}</div>
    <div>
        <a (click)="toggle()">{{ !detail ? 'Afficher les détails' : 'Cacher les détails' }}</a>
    </div>
    <div>
        Number reduce file : {{ countResize }}<br />
        Total reduce size : {{ reduceSize | numFormat }} octects
    </div>

    <button *ngIf="progress === total" class="primary" (click)="optimiseAccept()">Accepter</button>

    <div *ngIf="detail" class="list">
        <div *ngFor="let item of listOptimise; let index = index">
            <img
                src="{{ (item.reduceFile || item.sourceFile).url }}"
                alt="{{ (item.reduceFile || item.sourceFile).name }}"
            />
            <div>
                {{ item.sourceFile.realSize | numFormat }}<br />
                ↓<br />
                {{ item.reduceFile?.realSize || item.sourceFile.realSize | numFormat }} <br />
                {{ -1 * item.reduce | numFormat }} octects<br />
                {{ -100 + ((item.reduceFile?.realSize || 0) / item.sourceFile.realSize) * 100 | numFormat }} %
            </div>
        </div>
    </div>
</div>
